# azyk

**azykAPI** – это REST API-сервис для хранения и управления данными о продуктах питания в странах Центральной Азии. Сервис хранит базовую информацию о продуктах, их состав (витамины, минералы и т.д.), а также мультиязычные переводы названий и описаний.

## Содержание

- [Идея проекта](#идея-проекта)
- [Особенности](#особенности)
- [Стек технологий](#стек-технологий)
- [Архитектура (Clean Architecture)](#архитектура-clean-architecture)
- [Установка и запуск](#установка-и-запуск)
- [Переменные окружения](#переменные-окружения)
- [Примеры API-запросов](#примеры-api-запросов)
- [Планы по развитию](#планы-по-развитию)
- [Лицензия](#лицензия)

---

## Идея проекта

Цель azykAPI – создать единый центр данных по продуктам питания, производимым (или потребляемым) в странах Центральной Азии. Сервис должен позволять:

1. **Добавлять** новые продукты с информацией о регионе, категории, дате исследования и т.д.  
2. **Хранить** расширенный состав продуктов (жирные кислоты, витамины, минералы, аминокислоты, химические соединения).  
3. **Выдавать** данные в удобном виде, в том числе **на нескольких языках** (через переводы).  
4. В будущем **проводить расчёты** (например, общее содержание минералов, калорийность и т.д.) и возвращать их по запросу.  
5. **Интегрироваться** с другими системами, служить базой данных для исследований и аналитики.

---

## Особенности

- **Мультиязычность**: благодаря структуре таблиц и полей, каждое название / описание продукта можно хранить на нескольких языках одновременно.  
- **Расширяемость**: модель данных (ER-диаграмма) позволяет легко добавлять новые сущности (исследования, категории, виды состава).  
- **Гибкость**: можно подключить любые дополнительные расчёты и бизнес-логику в виде отдельных юзкейсов (UseCase).  
- **Clean Architecture**: код разделён на несколько уровней (domain, repository, usecase, handler), что упрощает поддержку и модульное тестирование.

---

## Стек технологий

- **Go (Golang)** – язык программирования.  
- **Gin** – HTTP-фреймворк для написания REST API.  
- **GORM** – ORM-библиотека для Go, обеспечивающая удобную работу с БД.  
- **PostgreSQL** – реляционная база данных, в которой хранятся все сущности проекта.  
- **Docker** (опционально) – может использоваться для контейнеризации и более простого запуска приложения.  

---

## Архитектура (Clean Architecture)

Проект реализован по принципам чистой архитектуры (*Clean Architecture*). Основные слои:

<small>

### cmd/
- **Назначение:** Точка входа в приложение. Каталог содержит подкаталоги для каждого исполняемого модуля или сервера (например, `cmd/server`), где находится основной файл `main.go` для запуска приложения.

### config/
- **Назначение:** Хранение логики загрузки конфигураций. Здесь располагаются файлы и функции для считывания настроек из `.env`, YAML или других источников с использованием библиотек, таких как Viper и godotenv.

### internal/
Содержит основную логику приложения, разделённую по слоям согласно принципам чистой архитектуры.

#### internal/delivery/
- **Назначение:** Внешний слой взаимодействия с пользователем или другими системами. Отвечает за обработку входящих запросов и передачу данных в слой бизнес-логики.

  - **http/**
    - **Назначение:** Содержит HTTP-обработчики (handlers), роутеры и код для работы с веб-запросами, реализованные с помощью фреймворка Gin.
  
  - **middleware/**
    - **Назначение:** Содержит промежуточное ПО (middleware) для обработки запросов, такое как аутентификация, логирование, обработка ошибок и т.д.

#### internal/domain/
- **Назначение:** Слой домена содержит основные бизнес-сущности и их определения.

  - **models/**
    - **Назначение:** Определяет доменные модели (структуры) — основные объекты предметной области (например, `Product`, `Region` и т.д.). Эти модели не содержат специфичной логики реализации инфраструктуры.

#### internal/repository/
- **Назначение:** Реализация паттерна Repository для доступа к данным. Здесь находятся реализации интерфейсов доступа к базе данных, работающие через GORM или другой ORM/библиотеку.

#### internal/usecase/
- **Назначение:** Бизнес-логика приложения. Содержит сценарии использования (use cases), в которых определены правила и последовательности операций над доменными моделями, реализуя основной функционал приложения.

### util/
- **Назначение:** Утилиты и вспомогательный код, не относящиеся напрямую к бизнес-логике. 
  - **Пример:** Функции инициализации подключения к базе данных, общие хелперы и т.д.
</small>


---

## Структура каталогов

Пример:
```bash
azyk/
  ├───cmd
  ├───config
  ├───internal
  │   ├───delivery
  │   │   ├───http
  │   │   └───middleware
  │   ├───domain
  │   │   └───models
  │   ├───repository
  │   └───usecase
  └───util
```
---


## Установка и запуск

1. **Склонировать репозиторий**:
   ```bash
   git clone https://github.com/aidarsnotion/azyk.git
   cd azyk
Установить зависимости (в корневой папке):

```bash
go mod download
```
Настроить переменные окружения (или Docker Compose). Пример:
```bash
export DB_HOST=localhost
export DB_PORT=5432
export DB_USER=postgres
export DB_PASS=secret
export DB_NAME=myfooddb
```
Или создать файл .env и загрузить его.

Запустить:
```bash
go run ./cmd/main.go
```
По умолчанию приложение слушает порт :8080.

Проверить в браузере или через curl:

```bash
curl http://localhost:8080/products
```
При первом запуске GORM автоматически выполнит миграции (если это настроено в main.go).

## Переменные окружения:
| Переменная | Описание                         | Пример значения       |
|------------|----------------------------------|-----------------------|
| DB_HOST    | Адрес хоста базы данных          | localhost или db      |
| DB_PORT    | Порт подключения к PostgreSQL    | 5432                  |
| DB_USER    | Имя пользователя БД              | postgres              |
| DB_PASS    | Пароль пользователя БД           | secret                |
| DB_NAME    | Название базы данных             | myfooddb              |

## Примеры API-запросов

Ниже минимальный набор примеров (сущность «Product») – маршруты могут отличаться в зависимости от конкретной реализации:

### Получить все продукты
```bash
GET /products
```
### Создать продукт
POST /products

**Тело запроса (JSON):**
```bash
{
  "category": "Dairy",
  "research_date": "2024-01-15T00:00:00Z",
  "region_id": 1,
  "translations": [
    {
      "language": "ru",
      "product_name": "Курут",
      "description": "Сушёные шарики из кислого молока"
    },
    {
      "language": "en",
      "product_name": "Kurut",
      "description": "Dried sour milk balls"
    }
  ]
}
```

### Получить продукт по ID
```bash
GET /products/1
```
### Обновить продукт
PUT /products/1
Тело запроса (JSON):
```bash
{
  "category": "Dairy Updated",
  "research_date": "2025-05-10T00:00:00Z",
  "region_id": 2,
  "translations": [
    {
      "language": "ru",
      "product_name": "Курут",
      "description": "Немного другое описание..."
    }
  ]
}
```

### Удалить продукт

```bash
DELETE /products/1
```

## Планы по развитию

1. **Добавить таблицы и эндпоинты для:**
   - Жирнокислотный состав (`fatty_acid_composition`)
   - Минеральный состав (`mineral_composition`)
   - Витаминный состав (`vitamin_composition`)
   - Исследования (`research_sources`)

2. **Реализовать** фильтры и агрегации (например, топ-10 продуктов по содержанию железа).

3. **Добавить авторизацию** (JWT, Role-based access) для контроля доступа к операциям.

4. **Интегрировать** Docker/Kubernetes для упрощённой контейнеризации и деплоя.

5. **Документировать API** (OpenAPI/Swagger) для удобного тестирования и интеграции.

---

## Лицензия

Этот проект распространяется под лицензией MIT для учебных целей.  
Копируйте, модифицируйте и используйте в образовательных целях.

---

MIT License

Copyright (c) [2025] [aidarsnotion]

Настоящим предоставляется разрешение лицам, получившим копию данного программного обеспечения и сопутствующей документации (в дальнейшем "Программное обеспечение"), 
бесплатно использовать Программное обеспечение без ограничений, включая неограниченное право на использование, копирование, изменение, объединение, публикацию, 
распространение, сублицензирование и/или продажу копий Программного обеспечения, а также разрешение лицам, которым предоставляется Программное обеспечение, 
делать это при соблюдении следующих условий:

Указанное выше уведомление об авторском праве и данное уведомление о разрешении должны быть включены во все копии или значимые части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ "КАК ЕСТЬ", БЕЗ ГАРАНТИЙ ЛЮБОГО РОДА, ЯВНЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ, ГАРАНТИЯМИ 
ТОРГОВОЙ ПРИГОДНОСТИ, ПРИМЕНЯЕМОСТИ ДЛЯ ОПРЕДЕЛЁННОЙ ЦЕЛИ И НЕНАРУШЕНИЯ ПРАВ. НИ В КОЕМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ 
ОТВЕТСТВЕННОСТИ ПО ИСКАМ, УЩЕРБУ ИЛИ ДРУГИМ ОБЯЗАТЕЛЬСТВАМ, ВОЗНИКАЮЩИМ ИЗ, ИСПОЛЬЗОВАНИЯ ИЛИ ИНЫХ ДЕЙСТВИЙ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ.

---

