# azyk

**azykAPI** – это REST API-сервис для хранения и управления данными о продуктах питания в странах Центральной Азии. Сервис хранит базовую информацию о продуктах, их состав (витамины, минералы и т.д.), а также мультиязычные переводы названий и описаний.

## Содержание

- [Идея проекта](#идея-проекта)
- [Особенности](#особенности)
- [Стек технологий](#стек-технологий)
- [Архитектура (Clean Architecture)](#архитектура-clean-architecture)
- [Установка и запуск](#установка-и-запуск)
- [Переменные окружения](#переменные-окружения)
- [Примеры API-запросов](#примеры-api-запросов)
- [Планы по развитию](#планы-по-развитию)
- [Лицензия](#лицензия)

---

## Идея проекта

Цель azykAPI – создать единый центр данных по продуктам питания, производимым (или потребляемым) в странах Центральной Азии. Сервис должен позволять:

1. **Добавлять** новые продукты с информацией о регионе, категории, дате исследования и т.д.  
2. **Хранить** расширенный состав продуктов (жирные кислоты, витамины, минералы, аминокислоты, химические соединения).  
3. **Выдавать** данные в удобном виде, в том числе **на нескольких языках** (через переводы).  
4. В будущем **проводить расчёты** (например, общее содержание минералов, калорийность и т.д.) и возвращать их по запросу.  
5. **Интегрироваться** с другими системами, служить базой данных для исследований и аналитики.

---

## Особенности

- **Мультиязычность**: благодаря структуре таблиц и полей, каждое название / описание продукта можно хранить на нескольких языках одновременно.  
- **Расширяемость**: модель данных (ER-диаграмма) позволяет легко добавлять новые сущности (исследования, категории, виды состава).  
- **Гибкость**: можно подключить любые дополнительные расчёты и бизнес-логику в виде отдельных юзкейсов (UseCase).  
- **Clean Architecture**: код разделён на несколько уровней (domain, repository, usecase, handler), что упрощает поддержку и модульное тестирование.

---

## Стек технологий

- **Go (Golang)** – язык программирования.  
- **Gin** – HTTP-фреймворк для написания REST API.  
- **GORM** – ORM-библиотека для Go, обеспечивающая удобную работу с БД.  
- **PostgreSQL** – реляционная база данных, в которой хранятся все сущности проекта.  
- **Docker** (опционально) – может использоваться для контейнеризации и более простого запуска приложения.  

---

## Архитектура (Clean Architecture)

Проект реализован по принципам чистой архитектуры (*Clean Architecture*). Основные слои:

1. **Domain (Entities)**  
   - Сущности (Product, Region и т.д.) без привязки к конкретным технологиям.  
   - Интерфейсы репозиториев (определяют методы работы с БД).

2. **Repository (Data / Storage)**  
   - Конкретная реализация интерфейсов репозиториев с использованием GORM и PostgreSQL.  

3. **UseCase (Business Logic)**  
   - Содержит «сценарии» (например, `CreateProduct`, `GetProductByID` и т.д.).  
   - Ориентирован на бизнес-логику, использует репозиторий.  

4. **Handler (Delivery / Transport)**  
   - Отвечает за взаимодействие с внешним миром (HTTP).  
   - Использует [Gin](https://gin-gonic.com/). Принимает запросы, валидирует и преобразует данные, вызывает UseCase, возвращает ответ.  

5. **Config / Main**  
   - Инициализация соединения с БД (PostgreSQL) и точка входа, где происходит сборка всех слоёв и запуск HTTP-сервера.

Такое разделение упрощает тестирование, рефакторинг и поддержку кода.

---

## Структура каталогов

Пример:
```bash
myfoodapi/
  ├─ cmd/
  │   └─ main.go                  # Точка входа в приложение
  ├─ config/
  │   └─ db.go                    # Подключение к БД (инициализация GORM)
  ├─ domain/
  │   ├─ product.go               # Сущности и интерфейсы для продуктов
  │   └─ region.go                # Аналогично для регионов (пример)
  ├─ repository/
  │   └─ product_repository.go    # Реализация ProductRepository (GORM)
  ├─ usecase/
  │   └─ product_usecase.go       # Бизнес-логика для продуктов
  ├─ handler/
  │   └─ product_handler.go       # Обработчики HTTP (Gin)
  ├─ go.mod
  ├─ go.sum
  └─ README.md
```

---

## Установка и запуск

1. **Склонировать репозиторий**:
   ```bash
   git clone https://github.com/<username>/myfoodapi.git
   cd myfoodapi
Установить зависимости (в корневой папке):

```bash
go mod download
```
Настроить переменные окружения (или Docker Compose). Пример:
```bash
export DB_HOST=localhost
export DB_PORT=5432
export DB_USER=postgres
export DB_PASS=secret
export DB_NAME=myfooddb
```
Или создать файл .env и загрузить его.

Запустить:
```bash
go run ./cmd/main.go
```
По умолчанию приложение слушает порт :8080.

Проверить в браузере или через curl:

```bash
curl http://localhost:8080/products
```
При первом запуске GORM автоматически выполнит миграции (если это настроено в main.go).

## Переменные окружения:
| Переменная | Описание                         | Пример значения       |
|------------|----------------------------------|-----------------------|
| DB_HOST    | Адрес хоста базы данных          | localhost или db      |
| DB_PORT    | Порт подключения к PostgreSQL    | 5432                  |
| DB_USER    | Имя пользователя БД              | postgres              |
| DB_PASS    | Пароль пользователя БД           | secret                |
| DB_NAME    | Название базы данных             | myfooddb              |

## Примеры API-запросов

Ниже минимальный набор примеров (сущность «Product») – маршруты могут отличаться в зависимости от конкретной реализации:

### Получить все продукты
```bash
GET /products
```
### Создать продукт
POST /products

**Тело запроса (JSON):**
```bash
{
  "category": "Dairy",
  "research_date": "2024-01-15T00:00:00Z",
  "region_id": 1,
  "translations": [
    {
      "language": "ru",
      "product_name": "Курут",
      "description": "Сушёные шарики из кислого молока"
    },
    {
      "language": "en",
      "product_name": "Kurut",
      "description": "Dried sour milk balls"
    }
  ]
}
```

### Получить продукт по ID
```bash
GET /products/1
```
### Обновить продукт
PUT /products/1
Тело запроса (JSON):
```bash
{
  "category": "Dairy Updated",
  "research_date": "2025-05-10T00:00:00Z",
  "region_id": 2,
  "translations": [
    {
      "language": "ru",
      "product_name": "Курут",
      "description": "Немного другое описание..."
    }
  ]
}
```

### Удалить продукт

```bash
DELETE /products/1
```

## Планы по развитию

1. **Добавить таблицы и эндпоинты для:**
   - Жирнокислотный состав (`fatty_acid_composition`)
   - Минеральный состав (`mineral_composition`)
   - Витаминный состав (`vitamin_composition`)
   - Исследования (`research_sources`)

2. **Реализовать** фильтры и агрегации (например, топ-10 продуктов по содержанию железа).

3. **Добавить авторизацию** (JWT, Role-based access) для контроля доступа к операциям.

4. **Интегрировать** Docker/Kubernetes для упрощённой контейнеризации и деплоя.

5. **Документировать API** (OpenAPI/Swagger) для удобного тестирования и интеграции.

---

## Лицензия

Этот проект распространяется под лицензией MIT для учебных целей.  
Копируйте, модифицируйте и используйте в образовательных целях.

---

MIT License

Copyright (c) [2025] [aidarsnotion]

Настоящим предоставляется разрешение лицам, получившим копию данного программного обеспечения и сопутствующей документации (в дальнейшем "Программное обеспечение"), 
бесплатно использовать Программное обеспечение без ограничений, включая неограниченное право на использование, копирование, изменение, объединение, публикацию, 
распространение, сублицензирование и/или продажу копий Программного обеспечения, а также разрешение лицам, которым предоставляется Программное обеспечение, 
делать это при соблюдении следующих условий:

Указанное выше уведомление об авторском праве и данное уведомление о разрешении должны быть включены во все копии или значимые части Программного обеспечения.

ПРОГРАММНОЕ ОБЕСПЕЧЕНИЕ ПРЕДОСТАВЛЯЕТСЯ "КАК ЕСТЬ", БЕЗ ГАРАНТИЙ ЛЮБОГО РОДА, ЯВНЫХ ИЛИ ПОДРАЗУМЕВАЕМЫХ, ВКЛЮЧАЯ, НО НЕ ОГРАНИЧИВАЯСЬ, ГАРАНТИЯМИ 
ТОРГОВОЙ ПРИГОДНОСТИ, ПРИМЕНЯЕМОСТИ ДЛЯ ОПРЕДЕЛЁННОЙ ЦЕЛИ И НЕНАРУШЕНИЯ ПРАВ. НИ В КОЕМ СЛУЧАЕ АВТОРЫ ИЛИ ПРАВООБЛАДАТЕЛИ НЕ НЕСУТ 
ОТВЕТСТВЕННОСТИ ПО ИСКАМ, УЩЕРБУ ИЛИ ДРУГИМ ОБЯЗАТЕЛЬСТВАМ, ВОЗНИКАЮЩИМ ИЗ, ИСПОЛЬЗОВАНИЯ ИЛИ ИНЫХ ДЕЙСТВИЙ С ПРОГРАММНЫМ ОБЕСПЕЧЕНИЕМ.

---

